# Copyright (c) 2018 Dreamacro
# æ¥ç®¡ï¼šä¸æ”¯æŒåœ¨æ­¤é¡µé¢ç›´æ¥ä¿®æ”¹ï¼Œè¯·åˆ°å…¨å±€è®¾ç½®é¡µé¢è¿›è¡Œä¿®æ”¹

# Port of HTTP(S) proxy server on the local end
# æ­¤é¡¹å°†è¢«æ¥ç®¡
port: 7890

# Port of SOCKS5 proxy server on the local end
# æ­¤é¡¹å°†è¢«æ¥ç®¡
socks-port: 7891

# Transparent proxy server port for Linux and macOS
# æ­¤é¡¹å°†è¢«æ¥ç®¡
redir-port: 7892

# HTTP(S) and SOCKS5 server on the same port
mixed-port: 7890

# Set to true to allow connections to the local-end server from
# other LAN IP addresses
# æ­¤é¡¹å°†è¢«æ¥ç®¡ä¸ºtrue
allow-lan: true

# This is only applicable when `allow-lan` is `true`
# '*': bind all IP addresses
# 192.168.122.11: bind a single IPv4 address
# "[aaaa::a8aa:ff:fe09:57d8]": bind a single IPv6 address
# HTTP(S)\SOCKS5 ç›‘å¬åœ°å€ï¼Œæ­¤é¡¹å°†è¢«æ¥ç®¡ä¸ºall
bind-address: "*" 

# Clash router working mode
# rule: rule-based packet routing
# global: all packets will be forwarded to a single endpoint
# direct: directly forward the packets to the Internet
# æ­¤é¡¹å°†è¢«æ¥ç®¡
mode: rule

# Clash by default prints logs to STDOUT
# info / warning / error / debug / silent
# æ­¤é¡¹å°†è¢«æ¥ç®¡
log-level: info

# When set to false, resolver won't translate hostnames to IPv6 addresses
# æ­¤é¡¹å°†è¢«æ¥ç®¡
ipv6: false

# RESTful web API listening address
# æ­¤é¡¹å°†è¢«æ¥ç®¡
external-controller: 0.0.0.0:9090

# A relative path to the configuration directory or an absolute path to a
# directory in which you put some static web resource. Clash core will then
# serve it at `http://{{external-controller}}/ui`.
# æ­¤é¡¹å°†è¢«æ¥ç®¡
external-ui: "/usr/share/openclash/dashboard"

# Secret for the RESTful API (optional)
# Authenticate by spedifying HTTP header `Authorization: Bearer ${secret}`
# ALWAYS set a secret if RESTful API is listening on 0.0.0.0
# æ­¤é¡¹å°†è¢«æ¥ç®¡
secret: '123456'

# authentication of local SOCKS5/HTTP(S) server
# æ­¤é¡¹å°†è¢«æ¥ç®¡
authentication:
  - "user1:pass1"
  - "user2:pass2"

# Outbound interface name
interface-name: br-lan

# tun option
# æ­¤é¡¹å°†è¢«æ¥ç®¡
tun:
#  enable: false
#  stack: system
#  dns-hijack:
#  - tcp://8.8.8.8:53
#  - tcp://8.8.4.4:53

# Static hosts for DNS server and connection establishment, only works
# when `dns.enhanced-mode` is `redir-host`.
#
# Wildcard hostnames are supported (e.g. *.clash.dev, *.foo.*.example.com)
# Non-wildcard domain names have a higher priority than wildcard domain names
# e.g. foo.example.com > *.example.com > .example.com
# P.S. +.foo.com equals to .foo.com and foo.com
hosts:
  # '*.clash.dev': 127.0.0.1
  # '.dev': 127.0.0.1
  # 'alpha.clash.dev': '::1'

profile:
  # store the `select` results in $HOME/.config/clash/.cache
  # when two different configurations have groups with the same name, the selected values are shared
  # set false if you don't want this behavior
  store-selected: true
  # open tracing exporter API
  tracing: true

# DNS server settings
# This section is optional. When not present, the DNS server will be disabled.
# å¦‚è®¢é˜…é…ç½®æ— åŒ…æ‹¬æ­¤é¡¹çš„æ‰€æœ‰DNSè®¾ç½®ï¼ŒOpenClashå°†è‡ªåŠ¨æ·»åŠ 
dns:
  enable: true # set true to enable dns (default is false) # æ­¤é¡¹å°†è¢«æ¥ç®¡ä¸ºtrue
  ipv6: false # default is false # æ­¤é¡¹å°†è¢«æ¥ç®¡
  listen: 0.0.0.0:53 # ç«¯å£ä¸º53æ—¶å°†è¢«æ¥ç®¡ä¸º7874
  # These nameservers are used to resolve the DNS nameserver hostnames below.
  # Specify IP addresses only
  default-nameserver:
    - 114.114.114.114
    - 8.8.8.8
  enhanced-mode: redir-host # or fake-ip # æ­¤é¡¹å°†è¢«æ¥ç®¡
  fake-ip-range: 198.18.0.1/16 # Fake IP addresses pool CIDR # æ­¤é¡¹å°†è¢«æ¥ç®¡
  use-hosts: true # lookup hosts and return IP record # æ­¤é¡¹å°†è¢«æ¥ç®¡
  # Hostnames in this list will not be resolved with fake IPs
  # i.e. questions to these domain names will always be answered with their
  # real IP addresses
  # fake-ip-filter:
  #   - '*.lan'
  #   - localhost.ptlogin2.qq.com
  
  # Supports UDP, TCP, DoT, DoH. You can specify the port to connect to.
  # All DNS questions are sent directly to the nameserver, without proxies
  # involved. Clash answers the DNS question with the first result gathered.
  nameserver:
  - 114.114.114.114
  - https://1.1.1.1/dns-query # dns over https
  fallback: # concurrent request with nameserver, fallback used when GEOIP country isn't CN
  - tcp://1.1.1.1
  fallback-filter:
    geoip: true # default
    ipcidr: # ips in these subnets will be considered polluted
      - 240.0.0.0/4

# ä»¥ä¸Šè®¾ç½®æ‚¨å¯ç›´æ¥è¦†ç›–åˆ°é…ç½®æ–‡ä»¶,æ— éœ€æ›´æ”¹
# Openclash ä¸ä¼šå¯¹ä¸‹æ–¹æœåŠ¡å™¨è®¾ç½®è¿›è¡Œä»»ä½•æ›´æ”¹ï¼Œè¯·ç¡®ä¿è®¾ç½®æ­£ç¡®

#proxy-providers: # ä»£ç†é›†è®¾ç½®ï¼Œæ­¤éƒ¨åˆ†ä¸Proxyä¸¤è€…ä¸èƒ½åŒæ—¶åˆ é™¤
#  pro:
#    type: http
#    path: ./proxy_provider/pro.yaml
#    url: https://xxx
#    interval: 3600
#    health-check:
#      enable: true
#      url: http://www.gstatic.com/generate_204
#      interval: 300
#  iplc:
#    type: file
#    path: ./proxy_provider/iplc.yaml
#    health-check:
#      enable: true
#      url: http://www.gstatic.com/generate_204
#      interval: 300

proxies: # èŠ‚ç‚¹è®¾ç½®ï¼Œæ­¤éƒ¨åˆ†ä¸proxy-providerä¸¤è€…ä¸èƒ½åŒæ—¶åˆ é™¤
- name: "ğŸ‡¸ğŸ‡¬ [SS]WebHorizon"
  type: ss
  server: disneyplus.yzyz.ga
  port: 16002
  cipher: aes-256-gcm
  password: "UJLKVASfmT"
  udp: true
- name: "ğŸ‡¸ğŸ‡¬ [VMESS]Amazon"
  type: vmess
  server: amazon.yzyz.ga
  port: 36555
  uuid: cecf9ec5-6ab0-44ce-c018-3bed34670d33
  alterId: 64
  cipher: auto
 # udp: true
  tls: false
  skip-cert-verify: true
 # servername: example.com # priority over wss host
 # network: ws
 # ws-path: /path
 # ws-headers:
 #    Host: v2ray.com

proxy-groups: # æ­¤å‚æ•°å¿…é¡»ä¿ç•™,ä¸èƒ½åˆ é™¤
- name: Selection
  type: select
  proxies:
    - ğŸŒDirect
    - ğŸ‡¸ğŸ‡¬ [VMESS]Amazon
- name: Malaysia
  type: select
  proxies:
    - ğŸŒDirect
- name: China
  type: select
  proxies:
    - ğŸŒDirect
    - ğŸ‡¸ğŸ‡¬ [VMESS]Amazon
- name: Singapore
  type: select
  proxies:
    - ğŸŒDirect
    - ğŸ‡¸ğŸ‡¬ [VMESS]Amazon
- name: Netflix
  type: select
  proxies:
    - ğŸŒDirect
    - ğŸ‡¸ğŸ‡¬ [VMESS]Amazon
- name: Disney+
  type: select
  proxies:
    - ğŸ‡¸ğŸ‡¬ [VMESS]Amazon
    - ğŸ‡¸ğŸ‡¬ [SS]WebHorizon
- name: TV APP
  type: select
  proxies:
    - ğŸŒDirect
    - ğŸ‡¸ğŸ‡¬ [VMESS]Amazon
- name: Speedtest
  type: select
  proxies:
    - ğŸŒDirect
    - ğŸ‡¸ğŸ‡¬ [VMESS]Amazon
- name: ğŸ›¡Guard
  type: select
  proxies:
    - â›”ï¸Reject
    - ğŸŒDirect
- name: ğŸŒDirect
  type: select
  proxies:
    - DIRECT
- name: â›”ï¸Reject
  type: select
  proxies:
    - REJECT

# https://lancellc.gitbook.io/clash/clash-config-file/rule-provider
#rule-providers:
#  name: # name of the provider
#    type: http # type of the provider, it can be a HTTP or a File
#    behavior: classical # or ipcidrã€domain
#    path: # where is the file, ./ relative to clash home
#    url: # only available when type is HTTP, where to download a file. You don't need to create a new file in local space.
#    interval: # auto-update interval, only available when type is HTTP

# https://lancellc.gitbook.io/clash/clash-config-file/script
#script:
#  code: |
#    def main(ctx, metadata):
#      ip = metadata["dst_ip"] = ctx.resolve_ip(metadata["host"])
#      if ip == "":
#        return "DIRECT"
#        
#      code = ctx.geoip(ip)
#      if code == "LAN" or code == "CN":
#        return "DIRECT"
#      
#      return "Proxy" # default policy for requests which are not matched by any other script
      
rules: # æ­¤å‚æ•°å¿…é¡»ä¿ç•™,ä¸èƒ½åˆ é™¤
# å¦‚æœæ‚¨å°†ä¸€ç›´ä½¿ç”¨ç¬¬ä¸‰æ–¹è§„åˆ™ï¼Œä¸‹æ–¹å¯ä»¥ç•™ç©ºã€‚
- DOMAIN-SUFFIX,google.com,Selection
- DOMAIN-KEYWORD,google,Selection
- DOMAIN-SUFFIX,youtube.com,Selection
- DOMAIN,google.com,Selection
- DOMAIN-SUFFIX,ad.com,REJECT
- IP-CIDR,127.0.0.0/8,DIRECT
# Netflix
- DOMAIN-SUFFIX,nflxvideo.net,Netflix
- DOMAIN-SUFFIX,netflix.com,Netflix
- DOMAIN-SUFFIX,fast.com,Netflix
# DisneyPlus Login
- DOMAIN-SUFFIX,disneyplus.com,Disney+
- DOMAIN-SUFFIX,disney-plus.net,Disney+
- DOMAIN-SUFFIX,disney-plus.net,Disney+
# DisneyPlus Streaming
- DOMAIN-SUFFIX,dssott.com,Singapore
# China Web
- DOMAIN-SUFFIX,koolshare.cn,China
- DOMAIN-SUFFIX,tongdun.net,China
- DOMAIN-SUFFIX,right.com.cn,China
- DOMAIN-SUFFIX,qhres2.com,China
- DOMAIN-SUFFIX,pstatp.com,China
- DOMAIN-SUFFIX,toutiao.com,China
- DOMAIN-SUFFIX,baidu.com,China
- DOMAIN-SUFFIX,17jita.com,China
- DOMAIN-SUFFIX,jitaba.cn,China
- DOMAIN-SUFFIX,ccguitar.cn,China
- DOMAIN-SUFFIX,echangwang.com,China
# Speedtest
- DOMAIN-SUFFIX,speedtest.net,Speedtest
# rename SOURCE-IP-CIDR and would remove after prerelease
- SRC-IP-CIDR,192.168.1.201/32,DIRECT
- GEOIP,CN,China
# - DST-PORT,80,DIRECT
# - SRC-PORT,7777,DIRECT
# or use rule with provider
# - RULE-SET,name,DIRECT
- MATCH,Selection